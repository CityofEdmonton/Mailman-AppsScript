!function(){var a={},b=function(b){for(var c=a[b],e=c.deps,f=c.defn,g=e.length,h=new Array(g),i=0;i<g;++i)h[i]=d(e[i]);var j=f.apply(null,h);if(void 0===j)throw"module ["+b+"] returned undefined";c.instance=j},c=function(b,c,d){if("string"!=typeof b)throw"module id must be a string";if(void 0===c)throw"no dependencies for "+b;if(void 0===d)throw"no definition function for "+b;a[b]={deps:c,defn:d,instance:void 0}},d=function(c){var d=a[c];if(void 0===d)throw"module ["+c+"] was undefined";return void 0===d.instance&&b(c),d.instance},e=function(a,b){for(var c=a.length,e=new Array(c),f=0;f<c;++f)e[f]=d(a[f]);b.apply(null,e)},f={};f.bolt={module:{api:{define:c,require:e,demand:d}}};var g=c,h=function(a,b){g(a,[],function(){return b})};h("4",tinymce.util.Tools.resolve),g("1",["4"],function(a){return a("tinymce.PluginManager")}),g("6",["4"],function(a){return a("tinymce.Env")}),g("7",["4"],function(a){return a("tinymce.util.Tools")}),g("8",[],function(){var a=function(a){return parseInt(a.getParam("plugin_preview_width","650"),10)},b=function(a){return parseInt(a.getParam("plugin_preview_height","500"),10)},c=function(a){return a.getParam("content_style","")};return{getPreviewDialogWidth:a,getPreviewDialogHeight:b,getContentStyle:c}}),g("a",[],function(){var a=function(a,b){a.fire("Previewing",{state:b})};return{firePreviewing:a}}),g("b",["4"],function(a){return a("tinymce.util.Promise")}),g("9",["7","8","a","b"],function(a,b,c,d){var e=function(e){var f,g="",h=e.dom.encode,i=b.getContentStyle(e);g+='<base href="'+h(e.documentBaseURI.getURI())+'">',i&&(g+='<style type="text/css">'+i+"</style>"),a.each(e.contentCSS,function(a){g+='<link type="text/css" rel="stylesheet" href="'+h(e.documentBaseURI.toAbsolute(a))+'">'});var j=e.settings.body_id||"tinymce";j.indexOf("=")!==-1&&(j=e.getParam("body_id","","hash"),j=j[e.id]||j);var k=e.settings.body_class||"";k.indexOf("=")!==-1&&(k=e.getParam("body_class","","hash"),k=k[e.id]||"");var l='<script>document.addEventListener && document.addEventListener("click", function(e) {for (var elm = e.target; elm; elm = elm.parentNode) {if (elm.nodeName === "A") {e.preventDefault();}}}, false);</script> ',m=e.settings.directionality?' dir="'+e.settings.directionality+'"':"",n={content:e.getContent()};c.firePreviewing(e,n);var o=n.content,p="function"==typeof(o||{}).then;return p?new d(function(a,b){o.then(function(b){f="<!DOCTYPE html><html><head>"+g+'</head><body id="'+h(j)+'" class="mce-content-body '+h(k)+'"'+h(m)+">"+b+l+"</body></html>",a(f)},b)}):f="<!DOCTYPE html><html><head>"+g+'</head><body id="'+h(j)+'" class="mce-content-body '+h(k)+'"'+h(m)+">"+o+l+"</body></html>"},f=function(a,b,c){var d=e(a),f="function"==typeof(d||{}).then,g=function(a){if(c)b.src="data:text/html;charset=utf-8,"+encodeURIComponent(a);else{var d=b.contentWindow.document;d.open(),d.write(a),d.close()}};f?d.then(function(a){g(a)},function(a){throw a}):g(d)};return{getPreviewHtml:e,injectIframeContent:f}}),g("5",["6","7","8","9"],function(a,b,c,d){var e=function(b){var e=!a.ie,f='<iframe src="javascript:\'\'" frameborder="0"'+(e?' sandbox="allow-scripts"':"")+"></iframe>",g=c.getPreviewDialogWidth(b),h=c.getPreviewDialogHeight(b);b.windowManager.open({title:"Preview",width:g,height:h,html:f,buttons:{text:"Close",onclick:function(a){a.control.parent().parent().close()}},onPostRender:function(a){var c=a.control.getEl("body").firstChild;d.injectIframeContent(b,c,e)}})};return{open:e}}),g("2",["5"],function(a){var b=function(b){b.addCommand("mcePreview",function(){a.open(b)})};return{register:b}}),g("3",[],function(){var a=function(a){a.addButton("preview",{title:"Preview",cmd:"mcePreview"}),a.addMenuItem("preview",{text:"Preview",cmd:"mcePreview",context:"view"})};return{register:a}}),g("0",["1","2","3"],function(a,b,c){return a.add("preview",function(a){b.register(a),c.register(a)}),function(){}}),d("0")()}();